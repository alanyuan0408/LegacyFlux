<script>

	function pageIndex(){
		$(".tidbits").click(function(){
		    var Posts = document.getElementById("listedPosts").childNodes;

		    //Initialize the click
		    for(i=0; i<Posts.length; i++){
		        if (Posts[i].dataset){
		           	if (Posts[i].dataset.id == $(this).attr('data-id')){
		               Posts[i].className = "selected";
		            } else {
		                Posts[i].className = "hidden_class";
		            }
		        }
		    }
		})
	}


</script>

<h4>Add Additional Entries</h4>

<hr>

<p><b>Note:</b> Entries added here <b>will not</b> be listed in the Jobs/ Entries. If you would like the post to be listed in the Jobs/ Entries, please go to the posting panel and post directed</p>

<br>

<div class="row">

  <div class="col-xs-4">
  	<ul id="itemPosts3" class="nav nav-tabs nav-stacked">
  		<li><a data-id="NewEntry" class="tidbits"><b>Add New Entry</b></a></li>

		<%  @current_user.news_letter_mail.news_letter_entries.each do |post| %>
			<% if post.tibbit_entry %>
		    	<li><a data-id="<%= post.item_id %>" class="tidbits"><%= post.entry_title %></a></li>
		    <% end %>
		<% end %>
	</ul>

  </div>

  <div class="col-xs-8" id="listedPosts">
  	
  	<div data-id="NewEntry">

		<%= form_for @current_user, namespace: @current_user.id, :url => url_for(:controller => "users", :action => "add_tidbit"), :remote => true do |f|%>

			<%= f.fields_for :news_letter_mail do |mail| %>

				<%= mail.fields_for :news_letter_entry do |entry| %>

					<%= entry.label :entry_title, "Title of the Entry:" %>
					<br>
					<%= entry.text_field :entry_title, :size=>"35", :class => "form-control",
					placeholder: "Title of Entry"%>

					<br>
					<%= entry.label :entry_text, "Text of Entry:" %>
					<br>
					<%= entry.text_area :entry_text, :size => "45x10", :class => "form-control",
					placeholder: "Posting Content" %>

				<% end %>

			<% end %>
			<br>

			<%= f.submit "Add to NewsLetter", class: "btn btn-default" %>
		<% end %>
	</div>

	<% @current_user.news_letter_mail.news_letter_entries.each do |post| %>
		<div data-id="<%= post.item_id %>" class="hidden_class" >

			<% if @current_user.news_letter_mail.news_letter_entries.
			    find_by(item_id: post.item_id) %>

			    <p><b>Item Title: <%= @current_user.news_letter_mail.news_letter_entries.
			    find_by(item_id: post.item_id).entry_title %></b></p>

			    <p>Text:</p>

			    <p><%= @current_user.news_letter_mail.news_letter_entries.
			    find_by(item_id: post.item_id).entry_text.html_safe %><p>

			    <%= form_for @current_user, namespace: post.id, :url => url_for(:controller => "users",
				    :action => "remove_newsItem", :item_id => post.item_id), :remote => true do |f|%>

				    <%= f.submit "Remove from NewsLetter", class: "btn btn-default" %>
				<% end %>

			<% end %>
		</div>

	<% end %>


  </div>

</div>